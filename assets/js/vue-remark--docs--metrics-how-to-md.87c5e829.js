(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{210:function(t,e,r){"use strict";e.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}},242:function(t,e,r){"use strict";r.r(e);var a=r(5),n=r(210),s=r(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s.a.config.optionMergeStrategies;var p={VueRemarkRoot:n.a},i=function(t){var e=t.options.components=t.options.components||{},r=t.options.computed=t.options.computed||{};Object.keys(p).forEach((function(t){"object"===o(p[t])&&"function"==typeof p[t].render?e[t]=p[t]:r[t]=function(){return p[t]}}))},c=s.a.config.optionMergeStrategies,l="__vueRemarkFrontMatter",u={excerpt:null,title:"Accessing Metrics",topic:"metrics",type:"how-to"};var v=function(t){t.options[l]&&(t.options[l]=u),s.a.util.defineReactive(t.options,l,u),t.options.computed=c.computed({$frontmatter:function(){return t.options[l]}},t.options.computed)},_=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("VueRemarkRoot",[r("h1",{attrs:{id:"accessing-metrics"}},[r("a",{attrs:{href:"#accessing-metrics","aria-hidden":"true"}},[t._v("#")]),t._v("Accessing Metrics")]),r("h2",{attrs:{id:"overview"}},[r("a",{attrs:{href:"#overview","aria-hidden":"true"}},[t._v("#")]),t._v("Overview")]),r("p",[t._v("Working Group Two exposes metrics that can help operators getting some operational insight. This data is exposed using the "),r("a",{attrs:{href:"https://openmetrics.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("OpenMetrics text format")]),t._v(".")]),r("p",[t._v("This text format is the same as exposed by Prometheus. In addition to being supported by Prometheus, many other systems\nhas OpenMetrics integrations such as\n"),r("a",{attrs:{href:"https://docs.datadoghq.com/integrations/openmetrics/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Datadog")]),t._v("\nand "),r("a",{attrs:{href:"https://docs.newrelic.com/docs/integrations/prometheus-integrations",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("New Relic")]),t._v(".")]),r("p",[t._v("The HTTP endpoint we provide will give you the current state of all of your metrics. We do not provide a query API.")]),r("p",[t._v("Please reach out to clarify what metrics you would need access to.")]),r("h2",{attrs:{id:"tokencredentials"}},[r("a",{attrs:{href:"#tokencredentials","aria-hidden":"true"}},[t._v("#")]),t._v("Token/credentials")]),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://console.wgtwo.com/api-keys-redirect",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Get credentials from Console")])]),r("p",[t._v("Required right: "),r("code",{pre:!0},[t._v("metrics.prometheus.read")])])])]),r("h2",{attrs:{id:"configuration"}},[r("a",{attrs:{href:"#configuration","aria-hidden":"true"}},[t._v("#")]),t._v("Configuration")]),r("p",[t._v("Replace "),r("code",{pre:!0},[t._v("{{client ID}}")]),t._v(" and "),r("code",{pre:!0},[t._v("{{client secret}}")]),t._v(" with their actual values")]),r("table",[r("thead",[r("tr",[r("th",{attrs:{align:"left"}},[t._v("Placeholder")]),r("th",{attrs:{align:"left"}},[t._v("Description")])])]),r("tbody",[r("tr",[r("td",{attrs:{align:"left"}},[r("code",{pre:!0},[t._v("{{client ID}}")])]),r("td",{attrs:{align:"left"}},[t._v("From credentials created in Console")])]),r("tr",[r("td",{attrs:{align:"left"}},[r("code",{pre:!0},[t._v("{{client secret}}")])]),r("td",{attrs:{align:"left"}},[t._v("From credentials created in Console")])])])]),r("p",[r("strong",[t._v("Base path: "),r("code",{pre:!0},[t._v("https://api.wgtwo.com/metrics/v1")])])]),r("h3",{attrs:{id:"curl"}},[r("a",{attrs:{href:"#curl","aria-hidden":"true"}},[t._v("#")]),t._v("Curl")]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",{pre:!0,attrs:{class:"language-bash"}},[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -u "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("client ID"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(":"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("client secret"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" https://api.wgtwo.com/metrics/v1")])]),r("h3",{attrs:{id:"prometheus"}},[r("a",{attrs:{href:"#prometheus","aria-hidden":"true"}},[t._v("#")]),t._v("Prometheus")]),r("p",[t._v("The below Prometheus config will scrape the metric endpoint from Working Group Two every 30 seconds,\nfetching all available time series. Note that the configuration will contain secrets.")]),r("p",[t._v("See: "),r("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/configuration/configuration/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("prometheus.io › Configuration")])]),r("pre",{pre:!0,attrs:{class:"language-yaml"}},[r("code",{pre:!0,attrs:{class:"language-yaml"}},[r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("global")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scrape_interval")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     30s\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("evaluation_interval")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30s\n\n"),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scrape_configs")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("job_name")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wgtwo'")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("honor_labels")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metrics_path")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/metrics/v1'")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scheme")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("basic_auth")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{{client ID}}'")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("password")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{{client secret}}'")]),t._v("\n\n  "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("static_configs")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("targets")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api.wgtwo.com:443'")])])]),r("h4",{attrs:{id:"example-run-with-docker"}},[r("a",{attrs:{href:"#example-run-with-docker","aria-hidden":"true"}},[t._v("#")]),t._v("Example: Run with Docker")]),r("blockquote",[r("p",[t._v("See: "),r("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/installation/#using-docker",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("prometheus.io › Using Docker")])])]),r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",{pre:!0,attrs:{class:"language-bash"}},[t._v("docker run -p "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v(":9090 -v /tmp/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus")])]),r("p",[t._v("For testing that federation works as expected, you may run this with the above config.")]),r("h4",{attrs:{id:"grafana"}},[r("a",{attrs:{href:"#grafana","aria-hidden":"true"}},[t._v("#")]),t._v("Grafana")]),r("blockquote",[r("p",[t._v("See: "),r("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/features/datasources/prometheus/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("grafana.com › Using Prometheus in Grafana")])])]),r("p",[t._v("As our metric API does not expose a query API, it cannot be used by Grafana directly.\nHowever, Grafana has built-in support for Prometheus.")]),r("h2",{attrs:{id:"links"}},[r("a",{attrs:{href:"#links","aria-hidden":"true"}},[t._v("#")]),t._v("Links")]),r("ul",[r("li",[r("a",{attrs:{href:"https://openmetrics.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("openmetrics.io")])]),r("li",[r("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("prometheus.io")]),t._v(" › "),r("a",{attrs:{href:"https://prometheus.io/docs/instrumenting/exposition_formats/#text-based-format",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Exposition Formats")])])])])}),[],!1,null,null,null);"function"==typeof i&&i(_),"function"==typeof v&&v(_);e.default=_.exports}}]);